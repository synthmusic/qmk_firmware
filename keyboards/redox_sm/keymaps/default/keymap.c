#include QMK_KEYBOARD_H  

// layers
#define _ALP 0
#define _DEL 1
#define _RHO 2
#define _PHI 3
#define _FUN 4
#define _MED 5

#include "custom_keys.c"
#include "handlers.c"
#include "combos.c"

//these are undef'd at eof
#define x       KC_NO
#define CS(x)   C(S(x))
#define WA(x)   LAG(x)
#define W(x)    G(x)
#define lf      KC_LEFT
#define rt      KC_RIGHT
#define dn      KC_DOWN
#define up      KC_UP
#define tab     KC_TAB
#define alt     KC_LALT
#define MT_C_0  MT(MOD_LCTL, KC_0)
#define MT_S_DT MT(MOD_LSFT, KC_DOT)

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
    [_ALP] = LAYOUT(
//┌────────┬────────┬────────┬────────┬────────┬────────┐                          ┌────────┬────────┬────────┬────────┬────────┬────────┐   
    KC_Q   , KC_W   , KC_E   , KC_R   , KC_T   , KC_BTN1,                            KC_BTN1, KC_Y   , KC_U   , KC_I   , KC_O   , KC_P   ,
//├────────┼────────┼────────┼────────┼────────┼────────┤                          ├────────┼────────┼────────┼────────┼────────┼────────┤   
    KC_A   , KC_S   , KC_D   , KC_F   , KC_G   , MED    ,                            MED    , KC_H   , KC_J   , KC_K   , KC_L   , RHO    ,
//├────────┼────────┼────────┼────────┼────────┼────────┤                          ├────────┼────────┼────────┼────────┼────────┼────────┤   
    _______, KC_X   , KC_C   , KC_V   , KC_B   , PHI    ,                            PHI    , KC_N   , KC_M   , KC_COMM, KC_DOT , _______,
//└────────┼────────┼────────┼────┬───┴────┬───┼────────┼────────┐        ┌────────┼────────┼───┬────┴───┬────┼────────┼────────┼────────┘   
             KC_LSFT, KC_LALT,      KC_LCTL,     DEL_ENT, FUN_TAB,          FUN_BSP, DEL_SPC,     KC_RCTL,      KC_RALT, KC_LSFT 
//         └────────┴────────┘    └────────┘   └────────┴────────┘        └────────┴────────┘   └────────┘    └────────┴────────┘   
    ),
    [_DEL] = LAYOUT(
//┌────────┬────────┬────────┬────────┬────────┬────────┐                          ┌────────┬────────┬────────┬────────┬────────┬────────┐   
    KC_LALT, KC_HOME, KC_UP  , KC_END , KC_PGUP, KC_BTN3,                            KC_BTN3, _______, KC_7   , KC_8   , KC_9   , KC_LSFT,
//├────────┼────────┼────────┼────────┼────────┼────────┤                          ├────────┼────────┼────────┼────────┼────────┼────────┤   
    S(alt) , KC_LEFT, KC_DOWN, KC_RGHT, KC_PGDN, _______,                            _______, _______, KC_4   , KC_5   , KC_6   , _______,
//├────────┼────────┼────────┼────────┼────────┼────────┤                          ├────────┼────────┼────────┼────────┼────────┼────────┤   
    KC_LSFT, _______, KC_DOWN, KC_LALT, _______,TO(_ALP),                           TO(_ALP), _______, KC_1   , KC_2   , KC_3   , KC_LSFT,
//└────────┼────────┼────────┼────┬───┴────┬───┼────────┼────────┐        ┌────────┼────────┼───┬────┴───┬────┼────────┼────────┼────────┘   
             _______, _______,      _______,     _______, S(tab) ,          KC_DEL , _______,     KC_0   ,      _______, KC_DOT  
//         └────────┴────────┘    └────────┘   └────────┴────────┘        └────────┴────────┘   └────────┘    └────────┴────────┘   
    ),
    // also includes delta underneath
    [_RHO] = LAYOUT(
//┌────────┬────────┬────────┬────────┬────────┬────────┐                          ┌────────┬────────┬────────┬────────┬────────┬────────┐   
    _______, _______,WA(KC_Q), AS_TOGG, _______, _______,                            _______, _______, _______, C(KC_A), C(KC_X), _______,
//├────────┼────────┼────────┼────────┼────────┼────────┤                          ├────────┼────────┼────────┼────────┼────────┼────────┤   
    SM_CAPS,WA(KC_A),WA(KC_C),WA(KC_E), _______,TO(_MED),                           TO(_MED), _______, KC_ENT , C(KC_V), C(KC_C), _L_KEY_,
//├────────┼────────┼────────┼────────┼────────┼────────┤                          ├────────┼────────┼────────┼────────┼────────┼────────┤   
    _______, _______, SM_CAPS, _______, _______,TO(_PHI),                           TO(_PHI), KC_NUM , C(KC_S), C(KC_Z), KC_MPLY, _______,
//└────────┼────────┼────────┼────┬───┴────┬───┼────────┼────────┐        ┌────────┼────────┼───┬────┴───┬────┼────────┼────────┼────────┘   
             _______, _______,      _______,    TO(_DEL),TO(_FUN),         TO(_FUN),TO(_DEL),     A_TAB  ,      _______, _______ 
//         └────────┴────────┘    └────────┘   └────────┴────────┘        └────────┴────────┘   └────────┘    └────────┴────────┘   
    ),
    [_PHI] = LAYOUT(
//┌────────┬────────┬────────┬────────┬────────┬────────┐                          ┌────────┬────────┬────────┬────────┬────────┬────────┐   
    A_TAB  , _______, W(up)  , _______,A(KC_F4), KC_BTN3,                            KC_BTN3,C(KC_F4), CS(tab), C(KC_T), C(tab) , A_TAB  ,
//├────────┼────────┼────────┼────────┼────────┼────────┤                          ├────────┼────────┼────────┼────────┼────────┼────────┤   
    SA_TAB , W(lf)  , W(dn)  , W(rt)  , _______, _______,                            _______, _______, A(lf)  , _______, A(rt)  , SA_TAB ,
//├────────┼────────┼────────┼────────┼────────┼────────┤                          ├────────┼────────┼────────┼────────┼────────┼────────┤   
    _______, _______,WA(KC_V), MIN_WIN, _______,TO(_ALP),                           TO(_ALP), _______,A(KC_F4), _______, BR_EJTB, _______,
//└────────┼────────┼────────┼────┬───┴────┬───┼────────┼────────┐        ┌────────┼────────┼───┬────┴───┬────┼────────┼────────┼────────┘   
            _______ ,_______ ,      _______,     KC_SPC , KC_ESC ,          KC_INS , KC_ENT ,     _______,      _______, _______ 
//         └────────┴────────┘    └────────┘   └────────┴────────┘        └────────┴────────┘   └────────┘    └────────┴────────┘   
    ),
    [_FUN] = LAYOUT(
//┌────────┬────────┬────────┬────────┬────────┬────────┐                          ┌────────┬────────┬────────┬────────┬────────┬────────┐   
    _______, KC_F7  , KC_F8  , KC_F9  , KC_F12 , KC_BTN2,                            KC_BTN2, KC_PAST, KC_P7  , KC_P8  , KC_P9  , KC_PMNS,
//├────────┼────────┼────────┼────────┼────────┼────────┤                          ├────────┼────────┼────────┼────────┼────────┼────────┤   
    _______, KC_F4  , KC_F5  , KC_F6  , KC_F11 , _______,                            _______, KC_PSLS, KC_P4  , KC_P5  , KC_P6  , KC_PPLS,
//├────────┼────────┼────────┼────────┼────────┼────────┤                          ├────────┼────────┼────────┼────────┼────────┼────────┤   
    _______, KC_F1  , KC_F2  , KC_F3  , KC_F10 ,TO(_ALP),                           TO(_ALP), KC_P0  , KC_P1  , KC_P2  , KC_P3  , KC_PENT,
//└────────┼────────┼────────┼────┬───┴────┬───┼────────┼────────┐        ┌────────┼────────┼───┬────┴───┬────┼────────┼────────┼────────┘   
             _______, _______,      _______,     KC_ENT ,KC_TAB  ,          KC_BSPC, KC_SPC ,     KC_P0  ,      _______, KC_PDOT 
//         └────────┴────────┘    └────────┘   └────────┴────────┘        └────────┴────────┘   └────────┘    └────────┴────────┘   
    ),
    [_MED] = LAYOUT(
//┌────────┬────────┬────────┬────────┬────────┬────────┐                          ┌────────┬────────┬────────┬────────┬────────┬────────┐   
    _______, SM_MSUL, KC_MS_U, SM_MSUR, KC_WH_U, KC_BTN1,                            KC_BTN1, KC_WH_U, _______, _______, _______, _______,
//├────────┼────────┼────────┼────────┼────────┼────────┤                          ├────────┼────────┼────────┼────────┼────────┼────────┤   
    _______, KC_MS_L, KC_MS_D, KC_MS_R, KC_WH_D, _L_KEY_,                            _L_KEY_, KC_WH_D, _______, KC_MRWD, KC_MFFD, _______,
//├────────┼────────┼────────┼────────┼────────┼────────┤                          ┼────────┼────────┼────────┼────────┼────────┼────────┤   
    _______, SM_MSDL, KC_MS_D, SM_MSDR, _______,TO(_ALP),                           TO(_ALP), _______, KC_MPRV, KC_MNXT, KC_MPLY, _______,
//└────────┼────────┼────────┼────┬───┴────┬───┼────────┼────────┐        ┌────────┼────────┼───┬────┴───┬────┼────────┼────────┼────────┘   
             _______, _______,      _______,     _______, _______,          _______, _______,     _______,      _______, _______ 
//         └────────┴────────┘    └────────┘   └────────┴────────┘        └────────┴────────┘   └────────┘    └────────┴────────┴   
    )
};
// for nums in the small layout version, send the numpad keys on tap, the shifted chars on hold (1 = !, 2 = @, etc)
// if shift is held, send the shifted numpad chars (for macros and what not)
#undef x
#undef CS
#undef WA
#undef W
#undef lf 
#undef rt
#undef dn 
#undef up
#undef tab
#undef alt
#undef MT_C_0
#undef MT_S_DT

// for reference!!!!
/*** 

    [BLANK] = LAYOUT(
//┌────────┬────────┬────────┬────────┬────────┬────────┐                          ┌────────┬────────┬────────┬────────┬────────┬────────┐   
    _______, _______, _______, _______, _______, _______,                            _______, _______, _______, _______, _______, _______,
//├────────┼────────┼────────┼────────┼────────┼────────┤                          ├────────┼────────┼────────┼────────┼────────┼────────┤   
    _______, _______, _______, _______, _______, _______,                            _______, _______, _______, _______, _______, _______,
//├────────┼────────┼────────┼────────┼────────┼────────┤                          ┼────────┼────────┼────────┼────────┼────────┼────────┤   
    _______, _______, _______, _______, _______, _______,                            _______, _______, _______, _______, _______, _______,
//└────────┼────────┼────────┼────┬───┴────┬───┼────────┼────────┐        ┌────────┼────────┼───┬────┴───┬────┼────────┼────────┼────────┘   
             _______, _______,      _______,     _______, _______,          _______, _______,     _______,      _______, _______ 
//         └────────┴────────┘    └────────┘   └────────┴────────┘        └────────┴────────┘   └────────┘    └────────┴────────┴   
    ),

***/